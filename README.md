# EasySiteCreator

Проект находится в активной разработки

[![N|Solid](https://github.com/EgorSidorov/EasySiteCreator/blob/master/image/example1.jpg)]

### Описание возможностей приложения
Приложение написано с использованием библиотеки Qt, протестировано на ОС Windows, Ubuntu. Позволяет создавать веб-приложения, используя язык JS стандарта ECMA SCRIPT на стороне сервер(не node js). Это достигается за счет С++ объектов request,response,db. Эти объекты написаны на С++ и вызываются в JS через обертку, предоставляемую Qt. Есть встроенная защита от множества запросов к серверу от одного ip-адреса.
Отличие от node js в полной встроенности сервера, базы данных и редактора БД(пока SQLite, но планируется в будущем MySql), редактора для работы с кодом, отсуствии необходимости прописывать пути к страницам в коде(это делается в графическом интерфейсе), модель работы сервера(здесь обычный многопоточный сервер с настраиваемым пулом потоков). Веб-страница по организации похожа на JSP.

[![N|Solid](https://github.com/EgorSidorov/EasySiteCreator/blob/master/image/example2.png)]

### Развитие приложения
Предполагается добавить больше встроенных классов на С++, для авторизации, ORM модели работы с СУБД, возможность работать с вебсокетами. Также добавить рефакторинг кода, подсветку синтаксиса внутреннего языка на основе js, возможность писать серверный код отдельно от кода отображения, отдельную программу для серверов без графического интерфейса, также будет добавлен туториал, примеры и серия обучающих видеоуроков.


### Особенности использования Qt
Окна отрисованы с помощью Qt Widgets. Дерево страниц хранится в обычном txt файле, с каждой строчки новый путь, отображается в QTreeWidget. Параметры проекта хранятся в JSON формате. База данных отображается в виджете tableview с помощью модель qsqlquerymodel. 

Многопоточный сервер используется QtWebApp(его архитектура похожа на сервлеты Java, но используется лишь один основной контроллер, все остальное сделано внутри него, также оттуда используется http парсер). К нему интегрирована защита от множества запросов с одного IP(своеобразная защита от DDos, будет развиваться). 

Javascript исполняется с помощью модуля QtScript. Исполняется на стороне сервера код, обернутый в конструкцию @@js(код)@@, возвращает ответ, или @@jsnoanswer(код)@@. 
В ответ возвращается вся страница, но можно не возвращать часть по условию if(true/false){часть страницы}endif; Условие true/false заменяется на серверный код, который проверяет условие, и возвращает данную строку.
С директивой [RETURN QBYTEARRAY] на странице приложение возвращает двоичный ответ от базы данных. Таким образом достигается возможность хранить отправляемые данные пользователем и возвращать их по запросу(пример - аватар пользователя из тестового приложения).


### Пример работы
На данном приложении написан тестовый сайт с авторизацией, регистрацией, добавлением фотографии пользоватеелм, отправкой пользователям сообщений.
[![N|Solid](https://github.com/EgorSidorov/EasySiteCreator/blob/master/image/example3.jpg)]
[![N|Solid](https://github.com/EgorSidorov/EasySiteCreator/blob/master/image/example4.jpg)]
[![N|Solid](https://github.com/EgorSidorov/EasySiteCreator/blob/master/image/example5.jpg)]